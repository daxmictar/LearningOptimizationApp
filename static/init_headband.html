<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Headband Initialize</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js" 
		     integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body>

<button id="postButton">Initialize Headband</button>

<script>
    const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
    // TODO make ticket and add tyler and octavio to help for duration of class period on
    // 10/25/23 from 7:00 PM - 8:22 PM   
    const waitForHeadband = async () => {
        await sleep(20000)
        init_headband()
    }

    function init_headband(){
        $.post("/open_api/init_headband", { "data":"somedata", "any":"data"},
            function(data, textStatus) {
                //this gets called when browser receives response from server
                console.log(data);

                //Redirect to index page upon server response from survey
                if(data[0] == "Headband Connected"){
                    window.location.href = 'index.html';
                }
            }, "json").fail( function(response) {
                //this gets called if the server throws an error
                console.log("error");
            console.log(response);});
    }

    document.getElementById('postButton').addEventListener('click', waitForHeadband);
</script>

</body>
</html>
